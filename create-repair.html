<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Reparación - ReparaTech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navbar -->
    <nav class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-tools text-2xl"></i>
                <span class="text-xl font-bold">ReparaTech</span>
            </div>
            <div class="flex items-center space-x-4">
                <a href="dashboard.html" class="hover:text-blue-200 transition">
                    <i class="fas fa-tachometer-alt mr-1"></i> Panel
                </a>
                <a href="equipment.html" class="hover:text-blue-200 transition">
                    <i class="fas fa-laptop mr-1"></i> Equipos
                </a>
                <div class="relative group">
                    <button class="flex items-center space-x-1 hover:text-blue-200">
                        <i class="fas fa-user-circle"></i>
                        <span>Admin</span>
                        <i class="fas fa-chevron-down text-xs"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 hidden group-hover:block">
                        <a href="profile.html" class="block px-4 py-2 text-gray-800 hover:bg-blue-50">Perfil</a>
                        <a href="#" data-logout class="block px-4 py-2 text-gray-800 hover:bg-blue-50">Cerrar Sesión</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Repair Form -->
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto">
            <div class="bg-white shadow-md rounded-lg overflow-hidden">
                <div class="bg-blue-600 text-white px-6 py-4">
                    <h2 class="text-xl font-bold">
                        <i class="fas fa-wrench mr-2"></i> Nueva Solicitud de Reparación
                    </h2>
                </div>
                <div class="p-6">
                    <form id="repairForm">
                        <!-- Equipment Selection -->
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="equipment">
                                Equipo a Reparar <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <select id="equipment" name="equipment" required
                                    class="block appearance-none w-full bg-gray-50 border border-gray-300 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-blue-500">
                                    <option value="">Seleccione un equipo...</option>
                                    <option value="EQ-001">Laptop Dell XPS 15 (EQ-001)</option>
                                    <option value="EQ-002">iPhone 13 Pro (EQ-002)</option>
                                    <option value="EQ-003">Monitor Samsung 27" (EQ-003)</option>
                                    <option value="EQ-004">MacBook Pro 16" (EQ-004)</option>
                                    <option value="EQ-005">iPad Pro 12.9" (EQ-005)</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Client Information -->
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="client">
                                Cliente <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <select id="client" name="client" required
                                    class="block appearance-none w-full bg-gray-50 border border-gray-300 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-blue-500">
                                    <option value="">Seleccione un cliente...</option>
                                    <option value="CL-001">Juan Pérez (juan.perez@email.com)</option>
                                    <option value="CL-002">María González (maria.gonzalez@email.com)</option>
                                    <option value="CL-003">Carlos Rodríguez (carlos.rodriguez@email.com)</option>
                                    <option value="CL-004">Ana Martínez (ana.martinez@email.com)</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Issue Description -->
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="issue">
                                Descripción del Problema <span class="text-red-500">*</span>
                            </label>
                            <textarea id="issue" name="issue" rows="4" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                placeholder="Describa en detalle el problema que presenta el equipo..."></textarea>
                        </div>

                        <!-- Priority -->
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                Prioridad <span class="text-red-500">*</span>
                            </label>
                            <div class="grid grid-cols-3 gap-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="priority" value="low" class="form-radio h-4 w-4 text-blue-600">
                                    <span class="ml-2">Baja</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="priority" value="medium" checked class="form-radio h-4 w-4 text-blue-600">
                                    <span class="ml-2">Media</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="priority" value="high" class="form-radio h-4 w-4 text-blue-600">
                                    <span class="ml-2">Alta</span>
                                </label>
                            </div>
                        </div>

                        <!-- Additional Fields -->
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <!-- Estimated Cost -->
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="cost">
                                    Costo Estimado (USD)
                                </label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <span class="text-gray-500">$</span>
                                    </div>
                                    <input id="cost" name="cost" type="number" step="0.01" min="0"
                                        class="pl-7 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                        placeholder="0.00">
                                </div>
                            </div>

                            <!-- Estimated Time -->
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="time">
                                    Tiempo Estimado (días)
                                </label>
                                <input id="time" name="time" type="number" min="1"
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    placeholder="3">
                            </div>
                        </div>

                        <!-- Attachments -->
                        <div class="mb-6">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                Adjuntar Archivos
                            </label>
                            <div class="flex items-center justify-center w-full">
                                <label class="flex flex-col w-full h-32 border-2 border-dashed hover:border-blue-500 hover:bg-gray-50 transition cursor-pointer rounded-md">
                                    <div class="flex flex-col items-center justify-center pt-7">
                                        <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                        <p class="text-sm text-gray-500">
                                            <span class="font-semibold">Haz clic para subir</span> o arrastra archivos aquí
                                        </p>
                                        <p class="text-xs text-gray-500 mt-1">Fotos, videos o documentos (max. 10MB)</p>
                                    </div>
                                    <input type="file" class="hidden" multiple>
                                </label>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-end space-x-4 pt-4 border-t border-gray-200">
                            <button type="button" onclick="window.history.back()"
                                class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center">
                                <i class="fas fa-times mr-2"></i> Cancelar
                            </button>
                            <button type="submit"
                                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center">
                                <i class="fas fa-save mr-2"></i> Guardar Solicitud
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2023 ReparaTech - Sistema de Gestión de Reparaciones</p>
        </div>
    </footer>

    <script>
        document.getElementById('repairForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const equipment = document.getElementById('equipment').value;
            const client = document.getElementById('client').value;
            const issue = document.getElementById('issue').value;
            const priority = document.querySelector('input[name="priority"]:checked').value;
            const cost = document.getElementById('cost').value;
            const time = document.getElementById('time').value;
            
            // Basic validation
            if (!equipment || !client || !issue) {
                alert('Por favor complete los campos obligatorios');
                return;
            }
            
            // In a real app, you would send this to your backend
            console.log('Repair request data:', {
                equipment,
                client,
                issue,
                priority,
                cost,
                time
            });
            
            // For demo purposes, we'll store in localStorage and redirect
            const repairs = JSON.parse(localStorage.getItem('repairs') || '[]');
            const newRepair = {
                id: 'REP-' + (repairs.length + 1).toString().padStart(3, '0'),
                equipment,
                client,
                issue,
                priority,
                cost: cost || 0,
                time: time || 3,
                status: 'pending',
                date: new Date().toLocaleDateString('es-ES')
            };
            repairs.push(newRepair);
            localStorage.setItem('repairs', JSON.stringify(repairs));
            
            alert('Solicitud de reparación creada con éxito!');
            window.location.href = 'dashboard.html';
        });

        // Pre-select equipment if coming from equipment page
        const urlParams = new URLSearchParams(window.location.search);
        const equipmentParam = urlParams.get('equipment');
        if (equipmentParam) {
            document.getElementById('equipment').value = equipmentParam;
        }
    </script>
</body>
</html>